-- Fonction principale pour créer l'interface
local function CreateInterface()

    -- Crée l'écran principal
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "HyraxPanel"  -- Nom du panneau
    ScreenGui.Parent = game:GetService("CoreGui")

    -- Panneau principal de l'interface
    local MainFrame = Instance.new("Frame")
    MainFrame.Size = UDim2.new(0, 600, 0, 700)  -- Taille du panneau
    MainFrame.Position = UDim2.new(0.5, -300, 0.5, -350)  -- Position centrée
    MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)  -- Couleur de fond
    MainFrame.Parent = ScreenGui

    -- Coins arrondis du panneau principal
    local UICornerMain = Instance.new("UICorner")
    UICornerMain.CornerRadius = UDim.new(0, 12)
    UICornerMain.Parent = MainFrame

    -- Création de la topbar (barre du haut)
    local TitleBar = Instance.new("Frame")
    TitleBar.Size = UDim2.new(1, 0, 0, 40)
    TitleBar.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    TitleBar.Parent = MainFrame

    -- Titre du panneau
    local TitleText = Instance.new("TextLabel")
    TitleText.Size = UDim2.new(0.7, 0, 1, 0)
    TitleText.Position = UDim2.new(0, 15, 0, 0)
    TitleText.BackgroundTransparency = 1
    TitleText.Text = "Hyrax's"
    TitleText.TextColor3 = Color3.fromRGB(255, 255, 255)
    TitleText.Font = Enum.Font.SourceSansBold
    TitleText.TextSize = 20
    TitleText.TextXAlignment = Enum.TextXAlignment.Left
    TitleText.Parent = TitleBar

    -- Bouton de fermeture
    local CloseButton = Instance.new("TextButton")
    CloseButton.Size = UDim2.new(0, 30, 0, 30)
    CloseButton.Position = UDim2.new(0, 560, 0, 5)
    CloseButton.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
    CloseButton.Text = "X"
    CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    CloseButton.Font = Enum.Font.SourceSansBold
    CloseButton.TextSize = 18
    CloseButton.Parent = TitleBar
    CloseButton.MouseButton1Click:Connect(function()
        ScreenGui:Destroy()
    end)

    -- Déplacer l'interface
    local dragging = false
    local dragInput, dragStart, startPos

    TitleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = true
            dragStart = input.Position
            startPos = MainFrame.Position
        end
    end)

    TitleBar.InputChanged:Connect(function(input)
        if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
        end
    end)

    TitleBar.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            dragging = false
        end
    end)

    ------------------------
    -- Panneau des onglets
    ------------------------

    local TabsPanel = Instance.new("Frame")
    TabsPanel.Size = UDim2.new(1, 0, 0, 50)
    TabsPanel.Position = UDim2.new(0, 0, 0, 40)
    TabsPanel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    TabsPanel.Parent = MainFrame

    local TabContents = {}

    -- Fonction pour créer un nouvel onglet
    local function CreateTab(name, index)
        local TabButton = Instance.new("TextButton")
        TabButton.Size = UDim2.new(0.2, 0, 1, 0)
        TabButton.Position = UDim2.new(0.2 * (index - 1), 0, 0, 0)
        TabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 60)
        TabButton.Text = name
        TabButton.TextColor3 = Color3.fromRGB(255, 255, 255)
        TabButton.Font = Enum.Font.SourceSansBold
        TabButton.TextSize = 18
        TabButton.Parent = TabsPanel

        -- Création de la zone de contenu de l'onglet
        local TabFrame = Instance.new("Frame")
        TabFrame.Size = UDim2.new(1, 0, 1, -90)
        TabFrame.Position = UDim2.new(0, 0, 0, 90)
        TabFrame.Visible = index == 1
        TabFrame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        TabFrame.Parent = MainFrame
        table.insert(TabContents, TabFrame)

        -- Clic sur l'onglet
        TabButton.MouseButton1Click:Connect(function()
            for _, frame in pairs(TabContents) do
                frame.Visible = false
            end
            TabFrame.Visible = true
        end)

        return TabFrame
    end

    ------------------------
    -- Fonction pour créer une section avec un toggle
    ------------------------

    -- Fonction pour créer un toggle (switch)
    local function CreateToggle(parent, name, callback)
        local ToggleFrame = Instance.new("Frame")
        ToggleFrame.Size = UDim2.new(1, 0, 0, 40)
        ToggleFrame.BackgroundTransparency = 1
        ToggleFrame.Parent = parent

        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(0.7, 0, 1, 0)
        label.Text = name
        label.TextColor3 = Color3.fromRGB(255, 255, 255)
        label.Font = Enum.Font.SourceSans
        label.TextSize = 18
        label.BackgroundTransparency = 1
        label.Parent = ToggleFrame

        local toggleButton = Instance.new("TextButton")
        toggleButton.Size = UDim2.new(0, 50, 0, 20)
        toggleButton.Position = UDim2.new(0.8, 0, 0, 10)
        toggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        toggleButton.Text = "Off"
        toggleButton.Font = Enum.Font.SourceSans
        toggleButton.TextSize = 16
        toggleButton.Parent = ToggleFrame

        toggleButton.MouseButton1Click:Connect(function()
            if toggleButton.Text == "Off" then
                toggleButton.Text = "On"
                toggleButton.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
            else
                toggleButton.Text = "Off"
                toggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            end
            if callback then callback(toggleButton.Text == "On") end
        end)

        return ToggleFrame
    end

    ------------------------
    -- Fonction pour créer un pin
    ------------------------

    -- Fonction pour créer un pin (bouton épinglé)
    local function CreatePin(parent, name)
        local PinFrame = Instance.new("Frame")
        PinFrame.Size = UDim2.new(1, 0, 0, 40)
        PinFrame.BackgroundTransparency = 1
        PinFrame.Parent = parent

        local label = Instance.new("TextLabel")
        label.Size = UDim2.new(0.7, 0, 1, 0)
        label.Text = name
        label.TextColor3 = Color3.fromRGB(255, 255, 255)
        label.Font = Enum.Font.SourceSans
        label.TextSize = 18
        label.BackgroundTransparency = 1
        label.Parent = PinFrame

        local pinButton = Instance.new("TextButton")
        pinButton.Size = UDim2.new(0, 50, 0, 20)
        pinButton.Position = UDim2.new(0.8, 0, 0, 10)
        pinButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
        pinButton.Text = "Pin"
        pinButton.Font = Enum.Font.SourceSans
        pinButton.TextSize = 16
        pinButton.Parent = PinFrame

        pinButton.MouseButton1Click:Connect(function()
            -- Fonctionnalité pour épingler ou détacher le panneau
            if pinButton.Text == "Pin" then
                pinButton.Text = "Unpin"
                pinButton.BackgroundColor3 = Color3.fromRGB(255, 0, 0)
            else
                pinButton.Text = "Pin"
                pinButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
            end
        end)

        return PinFrame
    end

    ------------------------
    -- Ajouter un onglet et des éléments
    ------------------------

    local Tab1 = CreateTab("Tab 1", 1)
    local Section1 = Instance.new("Frame")
    Section1.Size = UDim2.new(1, 0, 0, 150)
    Section1.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    Section1.Parent = Tab1
    local Toggle1 = CreateToggle(Section1, "Enable Feature", function(state)
        print("Feature Enabled: " .. tostring(state))
    end)

    local Pin1 = CreatePin(Section1, "Pin Option")

    return ScreenGui
end

-- Exécution de la fonction et renvoi de l'interface
CreateInterface()
